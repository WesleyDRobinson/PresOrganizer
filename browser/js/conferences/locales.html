
<div id="locales-dashboard" class="row">
	<div class="col-md-6">
		<h1>My Locales</h1> <button ng-if="!localeEdit"  ng-click="toggleEdit();" class="btn btn-sm edit-btn">Edit</button>
		<button class="btn btn-sm edit-btn" ng-click="toggleEdit()" ng-if="localeEdit">Editing</button>
		<div ng-repeat="locale in locales">
			<h2>
				<a ng-click="loadConferences(locale)">{{locale.name}}</a>
			</h2>
			
			<div><strong>Description:</strong> {{locale.description}}</div>
			<div><strong>Organizers:</strong>
				<span ng-repeat="organizer in locale.organizers">
					{{organizer.name}}
					<a ng-if="localeEdit && organizer.name!==myName" ng-click="removeOrganizer(organizer._id, locale._id)">
						<span class="glyphicon glyphicon-remove"></span>
					</a>
					<span ng-show="!$last">, </span>
					
				</span>
				<button ng-if="localeEdit" ng-click="newOrganizer(locale)" class="btn btn-sm"><i class="fa fa-plus"></i></button>
				
			</div>
		</div>
	</div>

	<div class="col-md-6" ng-if="conferences && !addOrganizer">
		<h1>Conferences for {{currentLocaleName}}</h1>
		<button ng-if="localeEdit" ui-sref="newConference({localeId:currentLocaleId, localeName: currentLocaleName})"class="btn btn-sm"><i class="fa fa-plus"></i></button>
		<ul class="list-unstyled">
			<div class="row">
				<div class="col-xs-4"><h3 class="conference-column-header">Conference name</h3></div>
				<div class="col-xs-4"><h3 class="conference-column-header">Date</h3></div>
				<div class="col-xs-4"><h3 class="conference-column-header">Venue</h3></div>

				<li class="clearfix" ng-repeat="conference in conferences | orderBy:'-date'">
					<div class="col-xs-4">
						<a ng-click="goToAdmin(conference._id, conference.name)">{{conference.name}}</a> 
						<a ng-if="localeEdit" ng-click="removeConference(conference._id, $index)" class="pull-right delete-item">
							<span><i class="fa fa-trash-o"></i></span>
						</a>
						

					</div>

					
					<div class="col-xs-4">
						<i>{{ conference.date | date:'MMM d, y' }}</i>
					</div>
					<div class="col-xs-4">
						<i>@ {{ conference.venue }}</i>
					</div>
				</li>
				<div class="col-xs-4 "ng-if="conferences.length===0">No conferences for this locale</div>

			</div>
		</ul>
	</div>
	<div class="col-md-6" ng-if="addOrganizer && localeEdit">
		<add-organizer></add-organizer>



	</div>
</div>


<!-- 

default message for non-organizers
cleanup

 -->